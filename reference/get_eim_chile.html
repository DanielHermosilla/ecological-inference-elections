<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Extracts voting and demographic data matrices for a given electoral district in Chile. — get_eim_chile • fastei</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="../deps/MathJax-3.2.2/tex-chtml.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extracts voting and demographic data matrices for a given electoral district in Chile. — get_eim_chile"><meta name="description" content="This function retrieves the voting results and demographic covariates for a given electoral district from the 2021 Chilean election dataset included in this package. The function returns an eim object that can be directly used in run_em or other estimation functions."><meta property="og:description" content="This function retrieves the voting results and demographic covariates for a given electoral district from the 2021 Chilean election dataset included in this package. The function returns an eim object that can be directly used in run_em or other estimation functions."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">fastei</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="external-link nav-link" href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=4832834">Paper</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-functions" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Functions</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-functions"><li><a class="dropdown-item" href="../reference/run_em.html">run_em()</a></li>
    <li><a class="dropdown-item" href="../reference/bootstrap.html">bootstrap()</a></li>
    <li><a class="dropdown-item" href="../reference/simulate_election.html">simulate_election()</a></li>
    <li><a class="dropdown-item" href="../reference/get_agg_opt.html">get_agg_opt()</a></li>
    <li><a class="dropdown-item" href="../reference/get_agg_proxy.html">get_agg_proxy()</a></li>
    <li><a class="dropdown-item" href="../reference/welchtest.html">welchtest()</a></li>
    <li><a class="dropdown-item" href="../reference/get_XW_chile.html">get_XW_chile()</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Index</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/DanielHermosilla/ecological-inference-elections/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Extracts voting and demographic data matrices for a given electoral district in Chile.</h1>
      <small class="dont-index">Source: <a href="https://github.com/DanielHermosilla/ecological-inference-elections/blob/HEAD/R/data-utils.R" class="external-link"><code>R/data-utils.R</code></a></small>
      <div class="d-none name"><code>get_eim_chile.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function retrieves the voting results and demographic covariates for a given electoral district from the 2021 Chilean election dataset included in this package. The function returns an <code><a href="eim.html">eim</a></code> object that can be directly used in <code><a href="run_em.html">run_em</a></code> or other estimation functions.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_eim_chile</span><span class="op">(</span></span>
<span>  elect_district <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  region <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  merge_blank_null <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  remove_mismatch <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-elect-district">elect_district<a class="anchor" aria-label="anchor" href="#arg-elect-district"></a></dt>
<dd><p>A string indicating the name of the electoral district to extract (e.g., "NIEBLA"). See <strong>Note</strong>.</p></dd>


<dt id="arg-region">region<a class="anchor" aria-label="anchor" href="#arg-region"></a></dt>
<dd><p>A string indicating the name of the region to extract (e.g, "DE TARAPACA"). See <strong>Note</strong>.</p></dd>


<dt id="arg-merge-blank-null">merge_blank_null<a class="anchor" aria-label="anchor" href="#arg-merge-blank-null"></a></dt>
<dd><p>Logical indicating whether blank and null votes should be merged into a single column. Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-remove-mismatch">remove_mismatch<a class="anchor" aria-label="anchor" href="#arg-remove-mismatch"></a></dt>
<dd><p>Logical indicating whether to remove ballot boxes with mismatched vote totals (where <code>MISMATCH == TRUE</code>). Defaults to <code>FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An <code><a href="eim.html">eim</a></code> object with the following attributes:</p><ul><li><p><strong>X</strong>: A matrix <code>(b x c)</code> with the number of votes per candidate (including a column for blank + null votes if <code>merge_blank_null = TRUE</code>).</p></li>
<li><p><strong>W</strong>: A matrix <code>(b x g)</code> with the number of voters per group (e.g., age ranges) for each ballot box.</p></li>
</ul><p>This object can be passed to functions like <code><a href="run_em.html">run_em</a></code> or <code><a href="get_agg_proxy.html">get_agg_proxy</a></code> for estimation and group aggregation. See <strong>Example</strong>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function builds the <code>X</code> matrix using the number of votes per candidate, and the <code>W</code> matrix using the number of voters in each demographic group (e.g., age ranges). Optionally, blank and null votes can be merged into a single additional column (considered as another candidate).</p>
<p>Additionally, ballot boxes where the number of votes does not match the number of registered voters (i.e., those where <code>MISMATCH == TRUE</code>) can be excluded from the dataset by setting <code>remove_mismatch = TRUE</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Only one parameter is accepted among <code>elect_district</code> and <code>region</code>. If either both parameters are given, it will return an error. If neither of these two inputs is supplied, it will return an eim object with an aggregation corresponding to the whole dataset. To see all electoral districts and regions names, see the function <a href="chile_election_2021.html">chile_election_2021</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="chile_election_2021.html">chile_election_2021</a></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Load data and create an eim object for the electoral district of "NIEBLA"</span></span></span>
<span class="r-in"><span><span class="va">eim_obj</span> <span class="op">&lt;-</span> <span class="fu">get_eim_chile</span><span class="op">(</span>elect_district <span class="op">=</span> <span class="st">"NIEBLA"</span>, remove_mismatch <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use it to run the EM algorithm</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="run_em.html">run_em</a></span><span class="op">(</span><span class="va">eim_obj</span>, allow_mismatch <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use it with group aggregation</span></span></span>
<span class="r-in"><span><span class="va">agg_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_agg_proxy.html">get_agg_proxy</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    object <span class="op">=</span> <span class="va">eim_obj</span>,</span></span>
<span class="r-in"><span>    sd_threshold <span class="op">=</span> <span class="fl">0.03</span>,</span></span>
<span class="r-in"><span>    allow_mismatch <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>    seed <span class="op">=</span> <span class="fl">123</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">agg_result</span><span class="op">$</span><span class="va">group_agg</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>fastei</p>
</div>

<div class="pkgdown-footer-right">
  <p>Developed by Charles Thraves, Pablo Ubilla, Daniel Hermosilla.</p>
</div>

    </footer></div>





  </body></html>

