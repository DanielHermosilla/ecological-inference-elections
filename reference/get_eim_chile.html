<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Extracts voting and demographic data matrices for a given electoral district in Chile. — get_eim_chile • fastei</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Extracts voting and demographic data matrices for a given electoral district in Chile. — get_eim_chile"><meta property="og:description" content="This function retrieves the voting results and demographic covariates for a given electoral district from the 2021 Chilean election dataset included in this package. The function returns an eim object that can be directly used in run_em or other estimation functions."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fastei</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.10</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/demonstration.html">Demonstration of the package usage</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/DanielHermosilla/ecological-inference-elections/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Extracts voting and demographic data matrices for a given electoral district in Chile.</h1>
    <small class="dont-index">Source: <a href="https://github.com/DanielHermosilla/ecological-inference-elections/blob/HEAD/R/data-utils.R" class="external-link"><code>R/data-utils.R</code></a></small>
    <div class="hidden name"><code>get_eim_chile.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function retrieves the voting results and demographic covariates for a given electoral district from the 2021 Chilean election dataset included in this package. The function returns an <code><a href="eim.html">eim</a></code> object that can be directly used in <code><a href="run_em.html">run_em</a></code> or other estimation functions.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_eim_chile</span><span class="op">(</span></span>
<span>  elect_district <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  region <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  merge_blank_null <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  remove_mismatch <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  use_sex <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-elect-district">elect_district<a class="anchor" aria-label="anchor" href="#arg-elect-district"></a></dt>
<dd><p>A string indicating the name of the electoral district to extract (e.g., "NIEBLA"). See <strong>Note</strong>.</p></dd>


<dt id="arg-region">region<a class="anchor" aria-label="anchor" href="#arg-region"></a></dt>
<dd><p>A string indicating the name of the region to extract (e.g, "DE TARAPACA"). See <strong>Note</strong>.</p></dd>


<dt id="arg-merge-blank-null">merge_blank_null<a class="anchor" aria-label="anchor" href="#arg-merge-blank-null"></a></dt>
<dd><p>Logical indicating whether blank and null votes should be merged into a single column. Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-remove-mismatch">remove_mismatch<a class="anchor" aria-label="anchor" href="#arg-remove-mismatch"></a></dt>
<dd><p>Logical indicating whether to remove ballot boxes with mismatched vote totals (where <code>MISMATCH == TRUE</code>). Defaults to <code>FALSE</code>.</p></dd>


<dt id="arg-use-sex">use_sex<a class="anchor" aria-label="anchor" href="#arg-use-sex"></a></dt>
<dd><p>Logical indicating whether to use the sex from the voters instead of the age ranges. Defaults to <code>FALSE</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>An <code><a href="eim.html">eim</a></code> object with the following attributes:</p><ul><li><p><strong>X</strong>: A matrix <code>(b x c)</code> with the number of votes per candidate (including a column for blank + null votes if <code>merge_blank_null = TRUE</code>).</p></li>
<li><p><strong>W</strong>: A matrix <code>(b x g)</code> with the number of voters per group (e.g., age ranges) for each ballot box.</p></li>
</ul><p>This object can be passed to functions like <code><a href="run_em.html">run_em</a></code> or <code><a href="get_agg_proxy.html">get_agg_proxy</a></code> for estimation and group aggregation. See <strong>Example</strong>.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The function builds the <code>X</code> matrix using the number of votes per candidate, and the <code>W</code> matrix using the number of voters in each demographic group (e.g., age ranges). Optionally, blank and null votes can be merged into a single additional column (considered as another candidate).</p>
<p>Additionally, ballot boxes where the number of votes does not match the number of registered voters (i.e., those where <code>MISMATCH == TRUE</code>) can be excluded from the dataset by setting <code>remove_mismatch = TRUE</code>.</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>Only one parameter is accepted among <code>elect_district</code> and <code>region</code>. If either both parameters are given, it will return an error. If neither of these two inputs is supplied, it will return an eim object with an aggregation corresponding to the whole dataset. To see all electoral districts and regions names, see the function <a href="chile_election_2021.html">chile_election_2021</a>.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><a href="chile_election_2021.html">chile_election_2021</a></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Load data and create an eim object for the electoral district of "NIEBLA"</span></span></span>
<span class="r-in"><span><span class="va">eim_obj</span> <span class="op">&lt;-</span> <span class="fu">get_eim_chile</span><span class="op">(</span>elect_district <span class="op">=</span> <span class="st">"NIEBLA"</span>, remove_mismatch <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use it to run the EM algorithm</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="run_em.html">run_em</a></span><span class="op">(</span><span class="va">eim_obj</span>, allow_mismatch <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use it with group aggregation</span></span></span>
<span class="r-in"><span><span class="va">agg_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_agg_proxy.html">get_agg_proxy</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    object <span class="op">=</span> <span class="va">eim_obj</span>,</span></span>
<span class="r-in"><span>    sd_threshold <span class="op">=</span> <span class="fl">0.05</span>,</span></span>
<span class="r-in"><span>    allow_mismatch <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>    seed <span class="op">=</span> <span class="fl">123</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">agg_result</span><span class="op">$</span><span class="va">group_agg</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 4 8</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Charles Thraves, Pablo Ubilla, Daniel Hermosilla.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

